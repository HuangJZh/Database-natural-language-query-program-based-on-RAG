常用查询模式
============================================================

简单单表查询:
描述: 查询用户的基本信息
SQL模式: SELECT user_id, username, email, city, country FROM users

带条件的单表查询:
描述: 查询来自纽约的用户
SQL模式: SELECT * FROM users WHERE city = 'New York'

两表连接查询:
描述: 查询产品及其分类信息
SQL模式: SELECT p.product_name, p.price, c.category_name FROM products p JOIN categories c ON p.category_id = c.category_id

聚合查询:
描述: 统计每个城市的用户数
SQL模式: SELECT city, COUNT(*) as user_count FROM users GROUP BY city ORDER BY user_count DESC

复杂多表连接:
描述: 查询每个用户的订单总金额
SQL模式: SELECT u.username, SUM(o.total_amount) as total_spent FROM users u JOIN orders o ON u.user_id = o.user_id GROUP BY u.user_id, u.username ORDER BY total_spent DESC

复杂列名查询:
描述: 查询用户的注册日期和最后登录时间，显示用户ID、用户名和城市，限制10个输出
SQL模式: SELECT user_id, username, city, registration_date, last_login FROM users LIMIT 10

多表连接与特定列:
描述: 查询订单详情，包括订单ID、用户名、产品名称、数量和单价，限制10个输出
SQL模式: SELECT o.order_id, u.username, p.product_name, oi.quantity, oi.unit_price 
FROM orders o 
JOIN users u ON o.user_id = u.user_id 
JOIN order_items oi ON o.order_id = oi.order_id 
JOIN products p ON oi.product_id = p.product_id 
LIMIT 10

聚合函数与分组:
描述: 统计每个产品类别的平均价格和产品数量，按平均价格降序排列，限制10个输出
SQL模式: SELECT c.category_name, 
AVG(p.price) as avg_price, 
COUNT(p.product_id) as product_count 
FROM products p 
JOIN categories c ON p.category_id = c.category_id 
GROUP BY c.category_id, c.category_name 
ORDER BY avg_price DESC

复杂条件查询:
描述: 查询最近30天内注册且来自美国纽约的黄金等级用户，限制10个输出
SQL模式: SELECT user_id, username, email, city, loyalty_level, registration_date 
FROM users 
WHERE city = 'New York' 
AND country = 'USA' 
AND loyalty_level = 'Gold' 
AND registration_date >= DATE_SUB(CURDATE(), INTERVAL 30 DAY)

子查询与高级分析:
描述: 查询消费金额高于平均消费水平的用户及其订单总数，限制10个输出
SQL模式: SELECT u.username, 
COUNT(o.order_id) as order_count, 
SUM(o.total_amount) as total_spent 
FROM users u 
JOIN orders o ON u.user_id = o.user_id 
GROUP BY u.user_id, u.username 
HAVING total_spent > (SELECT AVG(total_amount) FROM orders) 
ORDER BY total_spent DESC 
LIMIT 10

